<!DOCTYPE html>
<html>
<head>
  <title>BusPe UPI Payment</title>
</head>
<body>
  <h2>BusPe - Enter Fare Amount</h2>

  <div id="info"></div>
  <div>
    <label for="amount">Enter Fare Amount (₹): </label>
    <input type="number" id="amount" required />
    <button onclick="generateLink()">Generate UPI Link</button>
  </div>

  <div id="payment" style="margin-top: 20px; display: none;">
    <p id="upiInfo"></p>
    <a id="payBtn" href="#" style="padding: 10px; background: green; color: white; text-decoration: none;">Pay with UPI</a>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const upi = urlParams.get('upi');

    if (!upi) {
      document.getElementById("info").innerText = "Error: UPI ID is missing in the link.";
      document.querySelector("input").disabled = true;
    }

    function generateLink() {
      const amount = document.getElementById("amount").value;
      if (!amount || amount <= 0) {
        alert("Please enter a valid amount.");
        return;
      }

      const upiLink = `upi://pay?pa=${upi}&pn=BusOwner&am=${amount}&cu=INR`;

      document.getElementById("payment").style.display = "block";
      document.getElementById("upiInfo").innerText = `Click below to pay ₹${amount} to ${upi}`;
      document.getElementById("payBtn").href = upiLink;
    }
  </script>
</body>
</html>
